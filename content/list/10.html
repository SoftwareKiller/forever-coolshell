<!DOCTYPE html><!--[if IE 8]>
<html id="ie8" dir="ltr" lang="zh-CN"
	prefix="og: https://ogp.me/ns#" >
<![endif]--><!--[if !(IE 8) ]><!--><html dir="ltr" lang="zh-CN" prefix="og: https://ogp.me/ns#"><!--<![endif]--><head><meta charset="UTF-8"/><title>酷壳 – CoolShell.cn - Part 10</title><link rel="stylesheet" type="text/css" href="/assets/all.min.css"/><link rel="shortcut icon" href="/assets/favicon.png"/></head>
<body class="home blog paged paged-10 group-blog">

<div id="page" class="hfeed site">
<header id="masthead" role="banner">

<div id="cc_spacer"></div>
<div class="site-header">

<div class="site-branding">
<a class="home-link" href="/" title="酷 壳 – CoolShell" rel="home">
<h1 class="site-title">酷 壳 – CoolShell</h1>
<h2 class="site-description">享受编程和技术所带来的快乐 – Coding Your Ambition</h2>
</a>
</div>
</div>
</header>
<div class="container">
<div class="row">

</div>
</div>
<div id="content" class="site-content">
<div class="container">
<div class="row">
<div id="primary" class="content-area  col-md-12" style="margin-top: 40px;">
<main id="main" class="site-main" role="main">
<article id="post-11377" class="post-content post-11377 post type-post status-publish format-standard hentry category-cplusplus category-proglanguage tag-c">
<header class="entry-header">
<span class="screen-reader-text">C语言结构体里的成员数组和指针</span>
<h2 class="entry-title">
<a href="/articles/11377.html" rel="bookmark">C语言结构体里的成员数组和指针</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/11377.html" title="08:17" rel="bookmark"><time class="entry-date" datetime="2014-04-01T08:17:15+08:00" pubdate="">2014年04月01日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/11377.html#comments" class="comments-link">195 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 146,863 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p>单看这文章的标题，你可能会觉得好像没什么意思。你先别下这个结论，相信这篇文章会对你理解C语言有帮助。这篇文章产生的背景是在微博上，看到<a title="Laruence" href="http://weibo.com/laruence" target="_blank">@Laruence</a>同学出了一个关于C语言的题，<a href="http://weibo.com/1170999921/ADojDbuSe" target="_blank">微博链接</a>。微博截图如下。我觉得好多人对这段代码的理解还不够深入，所以写下了这篇文章。</p>
<p style="text-align: center;"><a href="http://weibo.com/1170999921/ADojDbuSe" target="_blank"><img decoding="async" class="aligncenter size-full wp-image-11378" alt="zero_array" src="/uploads/2014/03/zero_array.png" width="549" height="204" srcset="" sizes="(max-width: 549px) 100vw, 549px"/></a></p>
<p>为了方便你把代码copy过去编译和调试，我把代码列在下面：</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">#include &lt;stdio.h&gt;
struct str{
    int len;
    char s[0];
};

struct foo {
    struct str *a;
};

int main(int argc, char** argv) {
    struct foo f={0};
    if (f.a-&gt;s) {
        printf( f.a-&gt;s);
    }
    return 0;
}
</pre>
<p>你编译一下上面的代码，在VC++和GCC下都会在14行的printf处crash掉你的程序。<a title="Laruence" href="http://weibo.com/laruence" target="_blank">@Laruence</a> 说这个是个经典的坑，我觉得这怎么会是经典的坑呢？上面这代码，你一定会问，为什么if语句判断的不是f.a？而是f.a里面的数组？写这样代码的人脑子里在想什么？还是用这样的代码来玩票？不管怎么样，看过原微博的回复，我个人觉得大家主要还是对C语言理解不深，如果这算坑的话，那么全都是坑。</p>
<p> <a href="/articles/11377.html#more-11377" class="more-link">…</a></p><a href="/articles/11377.html#more-11377" class="more-link">
</a><p class="read-more"><a href="/articles/11377.html#more-11377" class="more-link"></a><a class="btn btn-default" href="/articles/11377.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-11377-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-11312" class="post-content post-11312 post type-post status-publish format-standard hentry category-misc category-tools tag-vim">
<header class="entry-header">
<span class="screen-reader-text">无插件Vim编程技巧</span>
<h2 class="entry-title">
<a href="/articles/11312.html" rel="bookmark">无插件Vim编程技巧</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/11312.html" title="08:25" rel="bookmark"><time class="entry-date" datetime="2014-03-24T08:25:29+08:00" pubdate="">2014年03月24日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/11312.html#comments" class="comments-link">127 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 222,577 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright  wp-image-11338" src="/uploads/2014/03/success_vim.jpg" alt="" width="222" height="244" srcset="" sizes="(max-width: 222px) 100vw, 222px"/>相信大家看过《<a title="简明 Vim 练级攻略" href="/articles/5426.html" target="_blank">简明Vim教程</a>》也玩了《<a title="游戏：VIM大冒险" href="/articles/7166.html" target="_blank">Vim大冒险</a>》的游戏了，相信大家对Vim都有一个好的入门了。我在这里把我日常用Vim编程的一些技巧列出来给大家看看，希望对大家有用，另外，也是一个抛砖引玉的过程，也希望大家把你们的技巧跟贴一下，我会更新到这篇文章中。另外，这篇文章里的这些技巧全都是vim原生态的，不需要你安装什么插件。<strong>我的Vim的版本是7.2</strong>。</p>
<h4>浏览代码</h4>
<p><span style="line-height: 1.5em;">首先，我们先从浏览代码开始。有时候，我们需要看多个文件，所以，传统的做法是，我们开多个tty终端，每个tty里用Vim打开一个文件，然后来回切换。这很没有什么效率。我们希望在一个Vim里打开多个文件，甚至浏览程序目录。</span></p>
<p>浏览目录的命令很简单：（你也可以直接vim一个目录）</p>
<blockquote><p><strong>:E</strong></p></blockquote>
<p>注意，是大写。于是，你会看到下面这样的界面：</p>
<p> <a href="/articles/11312.html#more-11312" class="more-link">…</a></p><a href="/articles/11312.html#more-11312" class="more-link">
</a><p class="read-more"><a href="/articles/11312.html#more-11312" class="more-link"></a><a class="btn btn-default" href="/articles/11312.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-11312-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-11265" class="post-content post-11265 post type-post status-publish format-standard hentry category-pythondev category-progdesign category-proglanguage tag-decorator tag-functional tag-programming tag-pythondev tag-697">
<header class="entry-header">
<span class="screen-reader-text">Python修饰器的函数式编程</span>
<h2 class="entry-title">
<a href="/articles/11265.html" rel="bookmark">Python修饰器的函数式编程</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/11265.html" title="09:50" rel="bookmark"><time class="entry-date" datetime="2014-03-20T09:50:34+08:00" pubdate="">2014年03月20日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/11265.html#comments" class="comments-link">84 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 124,794 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright wp-image-11300" src="/uploads/2014/03/snake-hat-new-year-schedule-800x960.jpg" alt="" width="280" height="233" srcset="" sizes="(max-width: 280px) 100vw, 280px"/>Python的修饰器的英文名叫Decorator，当你看到这个英文名的时候，你可能会把其跟Design Pattern里的Decorator搞混了，其实这是完全不同的两个东西。虽然好像，他们要干的事都很相似——都是想要对一个已有的模块做一些“修饰工作”，所谓修饰工作就是想给现有的模块加上一些小装饰（一些小功能，这些小功能可能好多模块都会用到），但又不让这个小装饰（小功能）侵入到原有的模块中的代码里去。但是OO的Decorator简直就是一场恶梦，不信你就去看看wikipedia上的词条（<a href="https://en.wikipedia.org/wiki/Decorator_pattern" target="_blank" rel="noopener noreferrer">Decorator Pattern</a>）里的UML图和那些代码，这就是我在《 <a title="链接：从面向对象的设计模式看软件设计" href="/articles/8961.html" rel="bookmark">从面向对象的设计模式看软件设计</a>》“餐后甜点”一节中说的，OO鼓励了——“厚重地胶合和复杂层次”，也是《 <a title="链接：如此理解面向对象编程" href="/articles/8745.html" rel="bookmark">如此理解面向对象编程</a>》中所说的“OO的狂热者们非常害怕处理数据”，Decorator Pattern搞出来的代码简直就是OO的反面教程。</p>
<p>Python 的 Decorator在使用上和Java/C#的Annotation很相似，就是在方法名前面加一个@XXX注解来为这个方法装饰一些东西。但是，Java/C#的Annotation也很让人望而却步，太TMD的复杂了，你要玩它，你需要了解一堆Annotation的类库文档，让人感觉就是在学另外一门语言。</p>
<p>而Python使用了一种相对于Decorator Pattern和Annotation来说非常优雅的方法，这种方法不需要你去掌握什么复杂的OO模型或是Annotation的各种类库规定，完全就是语言层面的玩法：一种函数式编程的技巧。如果你看过本站的《<a href="/articles/10822.html">函数式编程</a>》，你一定会为函数式编程的那种“描述你想干什么，而不是描述你要怎么去实现”的编程方式感到畅快。（如果你不了解函数式编程，那在读本文之前，还请你移步去看看《<a href="/articles/10822.html">函数式编程</a>》） 好了，我们先来点感性认识，看一个Python修饰器的Hello World的代码。</p>
<p> <a href="/articles/11265.html#more-11265" class="more-link">…</a></p><a href="/articles/11265.html#more-11265" class="more-link">
</a><p class="read-more"><a href="/articles/11265.html#more-11265" class="more-link"></a><a class="btn btn-default" href="/articles/11265.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-11265-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-11235" class="post-content post-11235 post type-post status-publish format-standard hentry category-dotnet category-cplusplus tag-net tag-c tag-float tag-fpu tag-sse">
<header class="entry-header">
<span class="screen-reader-text">一个浮点数跨平台产生的问题</span>
<h2 class="entry-title">
<a href="/articles/11235.html" rel="bookmark">一个浮点数跨平台产生的问题</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/11235.html" title="20:44" rel="bookmark"><time class="entry-date" datetime="2014-03-15T20:44:24+08:00" pubdate="">2014年03月15日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/articles/author/tanglei-name" title="View all posts by tanglei.name" rel="author">tanglei.name</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/11235.html#comments" class="comments-link">25 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 34,766 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><strong>感谢网友<a href="http://www.tanglei.name/" target="_blank">唐磊</a>（微博@<a title="唐磊_name" href="http://weibo.com/tangleithu?from=feed&amp;loc=nickname">唐磊_name</a>）投稿，本文原文在唐磊的博客上（<a href="http://www.tanglei.name/a-bug-relate-with-float-point-between-x86-and-x64-in-csharp/">原文地址</a>），原文分析还不够好，而且可能对人有误导，所以，我对原文做了很多修改，并加了Linux下的内容。浮点数是一个很复杂的事情，希望这篇文章有助于大家了解浮点数与其相关的C/C++的编译选项。</strong>（注：我没有Windows 32位以及C#的环境，所以，对于Windows 32位的程序和C#的程序没有验证过）</p>
<p>背景就简单点儿说，最近一个项目C#编写，涉及浮点运算，来龙去脉省去，直接看如下代码。</p>
<pre data-enlighter-language="csharp" class="EnlighterJSRAW">float p3x = 80838.0f;
float p2y = -2499.0f;
double v321 = p3x * p2y;
Console.WriteLine(v321);</pre>
<p>很简单吧，马上笔算下结果为-202014162，没问题，难道C#没有产生这样的结果？不可能吧，开启Visual Studio，copy代码试试，果然结果是-202014162。就这样完了么？显然没有！你把编译时的选项从AnyCPU改成x64试试~(服务器环境正是64位滴哦！！)结果居然边成了-202014160，对没错，就是-202014160。有点不相信，再跑两遍，仍然是-202014160。呃，想通了，因为浮点运算的误差，-202014160这个结果是合理的。</p>
<p>为什么合理呢？很正常，因为上面的p3x和p2y是两个float类型，虽然v321是double，但也是两个float类型计算完后再转成double的，<strong>float的精度本来也只有7位，所以，对于这个上亿的数，自然没有办法保证精度</strong>。</p>
<p><strong>但是为什么修改CPU的type会有不同的效果？</strong>嗯，我们再试试C/C++。</p>
<p> <a href="/articles/11235.html#more-11235" class="more-link">…</a></p><a href="/articles/11235.html#more-11235" class="more-link">
</a><p class="read-more"><a href="/articles/11235.html#more-11235" class="more-link"></a><a class="btn btn-default" href="/articles/11235.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-11235-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-11175" class="post-content post-11175 post type-post status-publish format-standard hentry category-javadev tag-copy-on-write tag-java">
<header class="entry-header">
<span class="screen-reader-text">Java中的CopyOnWrite容器</span>
<h2 class="entry-title">
<a href="/articles/11175.html" rel="bookmark">Java中的CopyOnWrite容器</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/11175.html" title="08:26" rel="bookmark"><time class="entry-date" datetime="2014-03-07T08:26:31+08:00" pubdate="">2014年03月07日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/articles/author/kiral" title="View all posts by 方 腾飞" rel="author">方 腾飞</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/11175.html#comments" class="comments-link">38 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 45,288 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright size-medium wp-image-11219" alt="" src="/uploads/2014/03/cow-copy-300x222.jpg" width="300" height="222" srcset=""/><strong>感谢 <a href="http://ifeve.com" target="_blank">清英</a> 同学的投稿</strong></p>
<p>Copy-On-Write简称COW，是一种用于程序设计中的优化策略。其基本思路是，从一开始大家都在共享同一个内容，当某个人想要修改这个内容的时候，才会真正把内容Copy出去形成一个新的内容然后再改，这是一种延时懒惰策略。从JDK1.5开始Java并发包里提供了两个使用CopyOnWrite机制实现的并发容器,它们是CopyOnWriteArrayList和CopyOnWriteArraySet。CopyOnWrite容器非常有用，可以在非常多的并发场景中使用到。</p>
<h4>什么是CopyOnWrite容器</h4>
<p>CopyOnWrite容器即写时复制的容器。通俗的理解是当我们往一个容器添加元素的时候，不直接往当前容器添加，而是先将当前容器进行Copy，复制出一个新的容器，然后新的容器里添加元素，添加完元素之后，再将原容器的引用指向新的容器。这样做的好处是我们可以对CopyOnWrite容器进行并发的读，而不需要加锁，因为当前容器不会添加任何元素。所以CopyOnWrite容器也是一种读写分离的思想，读和写不同的容器。</p>
<p> <a href="/articles/11175.html#more-11175" class="more-link">…</a></p><a href="/articles/11175.html#more-11175" class="more-link">
</a><p class="read-more"><a href="/articles/11175.html#more-11175" class="more-link"></a><a class="btn btn-default" href="/articles/11175.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-11175-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-11170" class="post-content post-11170 post type-post status-publish format-standard hentry category-funny category-story tag-714 tag-programming tag-58">
<header class="entry-header">
<span class="screen-reader-text">如何用最有创造力的方式输出42</span>
<h2 class="entry-title">
<a href="/articles/11170.html" rel="bookmark">如何用最有创造力的方式输出42</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/11170.html" title="22:42" rel="bookmark"><time class="entry-date" datetime="2014-03-06T22:42:42+08:00" pubdate="">2014年03月06日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/11170.html#comments" class="comments-link">29 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 42,949 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" src="/uploads/2014/03/42-300x240.jpg" alt="" width="300" height="240" class="alignright size-medium wp-image-11216" srcset="" sizes="(max-width: 300px) 100vw, 300px"/>酷壳似乎好长时间没有像《<a title="编程真难啊 - 80,069 人阅读" href="/articles/1391.html">编程真难啊</a>》或是《<a title="老手是这样教新手编程的" href="/articles/2420.html" target="_blank">老手是这样教新手编程的</a>》或是像《<a title="如何写出无法维护的代码" href="/articles/4758.html" target="_blank">如何写出无法维护的代码</a>》这样“严肃正经”的文章了，所以，赶在大家还没有向我扔臭鸡蛋前奉献一篇。这篇文章来自CodeGolf.StackExchange上的《<a href="http://codegolf.stackexchange.com/questions/21835/most-creative-way-to-display-42">Most creative way to display 42</a>》—— 请以最有创造力的方式输出42。于是出现了下面的这些答案（注：精彩的总是留在最后面）</p>
<h4>人生和宇宙终级问题的答案：42</h4>
<p>这里，需要介绍一下为什么要输出42。这时因为42是我们人生，世界乃至整个宇宙的终级答案。这要从《银河系漫游指南》（英文名：The Hitchhiker’s Guide to the Galaxy）说起。这本书是著名英国科幻小说作家Douglas  Adams所著5本银河系漫游指南系列科幻喜剧系列小说中的第一本，改编自他本人为英国广播公司第四电台（BBC Radio 4）所写的广播剧剧本。该书1979年10月12日首次由麦克米伦出版公司（Pan Books）出版，次周成为英国图书销量榜冠军，前3个月内销售超过25万本。截至2005年，这本小说已被翻译成超过30种语言在全世界发行，并且被改编为电视剧、电影、舞台剧等多种艺术形式的作品。</p>
<p>这本小说中小说中充满尖锐的讽刺和隐喻，被西方科幻爱好者奉为“科幻圣经”。其中有两个关键词，一个是Don’t Panic，一个是42影响力很大，而其中关于42的故事简介是这样的：</p>
<p style="padding-left: 30px;">百万年前，老鼠其实是一种超智慧生物，它们建造了一部超级电脑深思Deep Thought，它们问超级电脑，生命、宇宙以及任何事情的终极答案（<i>Answer to Life, the Universe, and Everything</i>）什么，经过了750万年的计算，深思告诉老鼠的后人答案是<b>42</b>，深思解释它只能计算出答案是什么，但答案的原因必须由另一部更高智能的电脑才能解释，而该部电脑就是地球。经过了800万年，就在结果要出来的五分钟前，地球却因为挡在预定兴建的星际间高速公路的路线，被Vogons给毁灭，电脑没有给出最后的结果。</p>
<p> <a href="/articles/11170.html#more-11170" class="more-link">…</a></p><a href="/articles/11170.html#more-11170" class="more-link">
</a><p class="read-more"><a href="/articles/11170.html#more-11170" class="more-link"></a><a class="btn btn-default" href="/articles/11170.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-11170-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-11112" class="post-content post-11112 post type-post status-publish format-standard hentry category-cplusplus category-itnews category-process tag-apple tag-bug tag-c tag-goto">
<header class="entry-header">
<span class="screen-reader-text">由苹果的低级Bug想到的</span>
<h2 class="entry-title">
<a href="/articles/11112.html" rel="bookmark">由苹果的低级Bug想到的</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/11112.html" title="08:12" rel="bookmark"><time class="entry-date" datetime="2014-02-24T08:12:11+08:00" pubdate="">2014年02月24日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/11112.html#comments" class="comments-link">116 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 111,194 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright size-full wp-image-11123" src="/uploads/2014/02/apple_goto_fail.png" alt="" width="260" height="158" srcset=""/> 2014年2月22日，在这个“这么二”的日子里，苹果公司推送了 iOS 7.0.6（版本号11B651）修复了 SSL 连接验证的一个 bug。官方网页在这里：<a href="http://support.apple.com/kb/HT6147" target="_blank">http://support.apple.com/kb/HT6147</a>，网页中如下描述：</p>
<blockquote><p><strong>Impact</strong>: An attacker with a privileged network position may capture or modify data in sessions protected by SSL/TLS</p>
<p><strong>Description</strong>: Secure Transport failed to validate the authenticity of the connection. This issue was addressed by restoring missing validation steps.</p></blockquote>
<p>也就是说，这个bug会引起中间人攻击，bug的描述中说，这个问题是因为miss了对连接认证的合法性检查的步骤。</p>
<p>这里多说一句，<strong>一旦网上发生任何的和SSL/TL相关的bug或安全问题，不管是做为用户，还是做为程序员的你，你一定要高度重视起来</strong>。因为这个网络通信的加密协议被广泛的应用在很多很多最最需要安全的地方，如果SSL/TLS有问题的话，意味着这个世界的计算机安全体系的崩溃。</p>
<h4>Bug的代码原因</h4>
<p>Adam Langley的《<a href="https://www.imperialviolet.org/2014/02/22/applebug.html">Apple’s SSL/TLS bug</a> 》的博文暴出了这个bug的细节。（在苹果的开源网站上，通过查看苹果的和SSL/TLS有关的代码变更，我们可以在文件<a href="http://opensource.apple.com/source/Security/Security-55471/libsecurity_ssl/lib/sslKeyExchange.c" target="_blank">sslKeyExchange.c</a>中找到下面的代码）</p>
<p> <a href="/articles/11112.html#more-11112" class="more-link">…</a></p><a href="/articles/11112.html#more-11112" class="more-link">
</a><p class="read-more"><a href="/articles/11112.html#more-11112" class="more-link"></a><a class="btn btn-default" href="/articles/11112.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-11112-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-11094" class="post-content post-11094 post type-post status-publish format-standard hentry category-misc category-tools tag-ide tag-programming tag-visual">
<header class="entry-header">
<span class="screen-reader-text">可视化编程</span>
<h2 class="entry-title">
<a href="/articles/11094.html" rel="bookmark">可视化编程</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/11094.html" title="00:27" rel="bookmark"><time class="entry-date" datetime="2014-02-22T00:27:10+08:00" pubdate="">2014年02月22日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/11094.html#comments" class="comments-link">48 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 51,765 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p>本文来自《<a href="http://blog.interfacevision.com/design/design-visual-progarmming-languages-snapshots/" target="_blank">Visual Programming Languages – Snapshots</a>》，作者<a href="https://twitter.com/erichosick" target="_blank">Eric Hosick</a>收集了一堆关于可视化编程的工具，好多我都听都没听说过，我一股脑的全转过来，给大家看看，算是开开眼界了。<span style="line-height: 1.5em;">本文也是参考了Wikipedia的 </span><a style="line-height: 1.5em;" href="https://en.wikipedia.org/wiki/Visual_programming_language">Visual Programming Language</a> 词条。</p>
<p>另外，在原文有很多评论，其中也有很多正文没有提到的，你可以前去围观一下。</p>
<h4 id="sketchpad">SketchPad</h4>
<p>Maybe the first. 1963.</p>
<p><a href="https://mydiesel22.blogspot.com/2011/05/vector-and-digital-graphics.html">图片来源</a>, <a href="https://en.wikipedia.org/wiki/Sketchpad">Wikipedia</a> 和 <a href="https://www.youtube.com/watch?v=495nCzxM9PI&amp;feature=player_embedded">官方网站</a></p>
<p style="text-align: center;"><img decoding="async" loading="lazy" class="aligncenter" alt="" src="http://blog.interfacevision.com/assets/img/posts/example_visual_language_sketchpad_01.jpg" width="576" height="407"/><img alt=""/></p>
<p> <a href="/articles/11094.html#more-11094" class="more-link">…</a></p><a href="/articles/11094.html#more-11094" class="more-link">
</a><p class="read-more"><a href="/articles/11094.html#more-11094" class="more-link"></a><a class="btn btn-default" href="/articles/11094.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-11094-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-11021" class="post-content post-11021 post type-post status-publish format-standard hentry category-webdev category-netsecurity tag-gist tag-github tag-oauth tag-web tag-318">
<header class="entry-header">
<span class="screen-reader-text">从“黑掉Github”学Web安全开发</span>
<h2 class="entry-title">
<a href="/articles/11021.html" rel="bookmark">从“黑掉Github”学Web安全开发</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/11021.html" title="08:16" rel="bookmark"><time class="entry-date" datetime="2014-02-10T08:16:11+08:00" pubdate="">2014年02月10日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/11021.html#comments" class="comments-link">61 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 101,051 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright" alt="" src="/uploads/2014/02/Github-Security.png" width="236" height="251" srcset=""/>Egor Homakov（Twitter: <a href="https://twitter.com/homakov">@homakov</a> 个人网站: <a href="http://egorhomakov.com/">EgorHomakov.com</a>）是一个Web安全的布道士，他这两天把github给黑了，并给github报了5个安全方面的bug，他在他的这篇blog——《<a href="https://homakov.blogspot.com/2014/02/how-i-hacked-github-again.html" target="_blank">How I hacked Github again</a>》（墙）说明了这5个安全bug以及他把github黑掉的思路。Egor的这篇文章讲得比较简单，很多地方一笔带过，所以，<strong>我在这里用我的语言给大家阐述一下黑掉Github的思路以及原文中所提到的那5个bug。希望这篇文章能让从事Web开发的同学们警惕</strong>。关于Web开发中的安全事项，大家可以看看这篇文章《<a title="Web开发中需要了解的东西" href="/articles/6043.html" target="_blank">Web开发中的你需要了解的东西</a>》</p>
<h4>OAuth简介</h4>
<p>首先，这个故事要从<a href="https://developer.github.com/v3/oauth/" target="_blank">Github OAuth</a>讲起。所以，我们需要先知道什么是<a href="https://en.wikipedia.org/wiki/OAuth" target="_blank">OAuth</a>。所谓OAuth就是说，第三方的应用可以通过你的授权而不用知道你的帐号密码能够访问你在某网站的你自己的数据或功能。像Google, Facebook, Twitter等网站都提供了OAuth服务，提供OAuth服务的网站一般都有很多开放的API，第三方应用会调用这些API来开发他们的应用以让用户拥有更多的功能，但是，当用户在使用这些第三方应用的时候，这些第三方的应用会来访问用户的帐户内的功能和数据，所以，当第三应用要干这些事的时候，我们不能让第三方应用弹出一个对话框来问用户要他的帐号密码，不然第三方的应用就把用户的密码给获取了，所以，OAuth协议会跳转到一个页面，让用户授权给这个第三方应用以某些权限，然后，这个权限授权的记录保存在Google/Facebook/Twitter上，并向第三方应用返回一个授权token，于是第三方的应用通过这个token来操作某用户帐号的功能和数据时，就畅通无阻了。下图简单地说明了Twitter的OAuth的授权过程。</p>
<p> <a href="/articles/11021.html#more-11021" class="more-link">…</a></p><a href="/articles/11021.html#more-11021" class="more-link">
</a><p class="read-more"><a href="/articles/11021.html#more-11021" class="more-link"></a><a class="btn btn-default" href="/articles/11021.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-11021-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-10975" class="post-content post-10975 post type-post status-publish format-standard hentry category-cplusplus category-progdesign category-funny tag-c tag-coroutine tag-queue tag-yield tag-707">
<header class="entry-header">
<span class="screen-reader-text">一个“蝇量级” C 语言协程库</span>
<h2 class="entry-title">
<a href="/articles/10975.html" rel="bookmark">一个“蝇量级” C 语言协程库</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/10975.html" title="10:50" rel="bookmark"><time class="entry-date" datetime="2014-01-28T10:50:41+08:00" pubdate="">2014年01月28日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/articles/author/full_of_bull" title="View all posts by Leo" rel="author">Leo</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/10975.html#comments" class="comments-link">54 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 108,902 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><strong>（感谢网友 </strong><a href="http://weibo.com/fullofbull" target="_blank"><strong>@我的上铺叫路遥</strong></a><strong> 投稿）</strong></p>
<p>协程(coroutine)顾名思义就是“协作的例程”（co-operative routines）。跟具有操作系统概念的线程不一样，协程是在用户空间利用程序语言的语法语义就能实现逻辑上类似多任务的编程技巧。实际上协程的概念比线程还要早，按照 Knuth 的说法<strong>“子例程是协程的特例”</strong>，一个子例程就是一次子函数调用，那么实际上协程就是类函数一样的程序组件，你可以在一个线程里面轻松创建数十万个协程，就像数十万次函数调用一样。只不过子例程只有一个调用入口起始点，返回之后就结束了，而协程入口既可以是起始点，又可以从上一个返回点继续执行，也就是说协程之间可以通过 yield 方式转移执行权，<strong>对称（symmetric）、平级</strong>地调用对方，而不是像例程那样上下级调用关系。当然 Knuth 的“特例”指的是协程也可以模拟例程那样实现上下级调用关系，这就叫<strong>非对称协程</strong>（asymmetric coroutines）。</p>
<h4>基于事件驱动模型</h4>
<p>我们举一个例子来看看一种<strong>对称协程</strong>调用场景，大家最熟悉的“生产者-消费者”事件驱动模型，一个协程负责生产产品并将它们加入队列，另一个负责从队列中取出产品并使用它。为了提高效率，你想一次增加或删除多个产品。伪代码可以是这样的：</p>
<pre data-enlighter-language="shell" class="EnlighterJSRAW"># producer coroutine
loop
while queue is not full
  create some new items
  add the items to queue
yield to consumer

# consumer coroutine
loop
while queue is not empty
  remove some items from queue
  use the items
yield to producer</pre>
<p> <a href="/articles/10975.html#more-10975" class="more-link">…</a></p><a href="/articles/10975.html#more-10975" class="more-link">
</a><p class="read-more"><a href="/articles/10975.html#more-10975" class="more-link"></a><a class="btn btn-default" href="/articles/10975.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-10975-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<nav class="navigation posts-navigation" role="navigation">
<h2 class="screen-reader-text">Posts navigation</h2>
<div class="nav-links">
<div class="row">
<div class="wp-pagenavi" role="navigation">
<span class="pages">第 10 / 74 页</span><a class="first" aria-label="First Page" href="/">« 首页</a><a class="previouspostslink" rel="prev" aria-label="上一页" href="/page/9.html">«</a><span class="extend">...</span><a class="page smaller" title="第 6 页" href="/page/6.html">6</a><a class="page smaller" title="第 7 页" href="/page/7.html">7</a><a class="page smaller" title="第 8 页" href="/page/8.html">8</a><a class="page smaller" title="第 9 页" href="/page/9.html">9</a><span aria-current="page" class="current">10</span><a class="page larger" title="第 11 页" href="/page/11.html">11</a><a class="page larger" title="第 12 页" href="/page/12.html">12</a><a class="page larger" title="第 13 页" href="/page/13.html">13</a><a class="page larger" title="第 14 页" href="/page/14.html">14</a><a class="page larger" title="第 15 页" href="/page/15.html">15</a><span class="extend">...</span><a class="larger page" title="第 30 页" href="/page/30.html">30</a><a class="larger page" title="第 40 页" href="/page/40.html">40</a><a class="larger page" title="第 50 页" href="/page/50.html">50</a><a class="larger page" title="第 60 页" href="/page/60.html">60</a><a class="larger page" title="第 70 页" href="/page/70.html">70</a><span class="extend">...</span><a class="nextpostslink" rel="next" aria-label="下一页" href="/page/11.html">»</a><a class="last" aria-label="Last Page" href="/page/74.html">末页 »</a>
</div>
</div>
</div>
</nav>
</main>
</div>

</div>
</div>

</div>

</div>
















</body></html>