<!DOCTYPE html><!--[if IE 8]>
<html id="ie8" dir="ltr" lang="zh-CN"
	prefix="og: https://ogp.me/ns#" >
<![endif]--><!--[if !(IE 8) ]><!--><html dir="ltr" lang="zh-CN" prefix="og: https://ogp.me/ns#"><!--<![endif]--><head><meta charset="UTF-8"/><title>酷壳 – CoolShell.cn - Part 9</title><link rel="stylesheet" type="text/css" href="/assets/all.min.css"/><link rel="shortcut icon" href="/assets/favicon.png"/></head>
<body class="home blog paged paged-9 group-blog">

<div id="page" class="hfeed site">
<header id="masthead" role="banner">

<div id="cc_spacer"></div>
<div class="site-header">

<div class="site-branding">
<a class="home-link" href="/" title="酷 壳 – CoolShell" rel="home">
<h1 class="site-title">酷 壳 – CoolShell</h1>
<h2 class="site-description">享受编程和技术所带来的快乐 – Coding Your Ambition</h2>
</a>
</div>
</div>
</header>
<div class="container">
<div class="row">

</div>
</div>
<div id="content" class="site-content">
<div class="container">
<div class="row">
<div id="primary" class="content-area  col-md-12" style="margin-top: 40px;">
<main id="main" class="site-main" role="main">
<article id="post-11847" class="post-content post-11847 post type-post status-publish format-standard hentry category-misc category-funny tag-algorithm tag-linux tag-puzzle tag-unix">
<header class="entry-header">
<span class="screen-reader-text">谜题的答案和活动的心得体会</span>
<h2 class="entry-title">
<a href="/articles/11847.html" rel="bookmark">谜题的答案和活动的心得体会</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/11847.html" title="07:47" rel="bookmark"><time class="entry-date" datetime="2014-08-06T07:47:50+08:00" pubdate="">2014年08月06日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/11847.html#comments" class="comments-link">98 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 58,935 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p>我于2014年8月3日周六的上午在微博、twitter、CoolShell上发布了一个和程序员有关的解谜题的活动——<a title="【活动】解迷题送礼物" href="/articles/11832.html" target="_blank">【活动】解谜题送礼物</a>。我使用了二级域名fun.coolshell.cn做为这次活动的页面。</p>
<p><img decoding="async" class="aligncenter size-full wp-image-11848" src="/uploads/2014/08/puzzle.png" alt="" width="543" height="206" srcset="" sizes="(max-width: 543px) 100vw, 543px"/></p>
<p>截止这篇文章发布的时候，fun.coolshell.cn的访问量UV大约有4万左右，通关人数大约有200人，但因为在活动的第二天网上就出了一些答题攻略，通过分析，实际靠自己能力通过的人数在130人左右。通过率大约不到4‰的样子。</p>
<p>在这里我把整个谜题和做这个活动的东西写一下，算是给自己的一个总结。</p>
<h4>谜题的答案和花絮</h4>
<p>fun.coolshell.cn上一共有十道谜题，<strong>要设计这些东西还真是费尽脑汁，这让我对那些设计谜题式游戏的人相当敬佩</strong>。</p>
<p> <a href="/articles/11847.html#more-11847" class="more-link">…</a></p><a href="/articles/11847.html#more-11847" class="more-link">
</a><p class="read-more"><a href="/articles/11847.html#more-11847" class="more-link"></a><a class="btn btn-default" href="/articles/11847.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-11847-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-11832" class="post-content post-11832 post type-post status-publish format-standard hentry category-misc category-funny tag-algorithm tag-puzzle">
<header class="entry-header">
<span class="screen-reader-text">【活动】解迷题送礼物</span>
<h2 class="entry-title">
<a href="/articles/11832.html" rel="bookmark">【活动】解迷题送礼物</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/11832.html" title="18:52" rel="bookmark"><time class="entry-date" datetime="2014-08-03T18:52:14+08:00" pubdate="">2014年08月03日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/11832.html#comments" class="comments-link">107 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 45,968 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p>首先，先跟大家道歉一下最近CoolShell大约长达一个多月没有什么更新，原因主要在于，我去看世界杯去了，这一个月的世界杯熬夜看球使我的精力不佳，导致世界杯结束后的几个星期也没有缓过来，所以没有更新什么文章。好多朋友写邮件或是在微博上at我催我更新，所以有点惭愧了。</p>
<p>精神不佳我就不写文章了。于是，世界杯过后，我每天都会抽出每天晚上和周末的一些碎片时间，我仿照一些前端过关的游戏，做了几个和程序员有关的迷题，也是要通关的，不过和前端知识没什么关系。这个游戏我放到了下面这个二级域名下。</p>
<p style="text-align: center;"><strong><a href="http://fun.coolshell.cn/" target="_blank">http://fun.coolshell.cn/</a></strong></p>
<p style="text-align: left;"><a href="http://fun.coolshell.cn/"><img decoding="async" loading="lazy" class="aligncenter" src="http://ww2.sinaimg.cn/mw1024/538efefbgw1eiz9cvx78fj20rm0fmdi8.jpg" alt="" width="500" height="281"/></a></p>
<p style="text-align: left;">有兴趣的朋友可以去玩玩。通关的同学我会送你们《Unix环境高级编程（第三版）》<span style="color: #423009;">（感谢<a style="color: #6c6351;" href="http://weibo.com/n/%E5%87%BA%E7%89%88%E5%9C%88%E9%83%AD%E5%BF%97%E6%95%8F?from=feed&amp;loc=at">@出版圈郭志敏</a> 赞助）或一个马克杯（感谢<a style="color: #6c6351;" href="http://weibo.com/n/linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%B2%BE%E9%80%89%E7%BD%91?from=feed&amp;loc=at">@linux命令行精选网</a> 赞助）</span>），因为奖品数量有限，所以，我会送给前十个通关的同学（后面通关的我会随机抽几个）。</p>
<p style="text-align: left;"> <a href="/articles/11832.html#more-11832" class="more-link">…</a></p><a href="/articles/11832.html#more-11832" class="more-link">
</a><p class="read-more"><a href="/articles/11832.html#more-11832" class="more-link"></a><a class="btn btn-default" href="/articles/11832.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-11832-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-11656" class="post-content post-11656 post type-post status-publish format-standard hentry category-550 category-process tag-programming tag-project tag-738 tag-58">
<header class="entry-header">
<span class="screen-reader-text">开发团队的效率</span>
<h2 class="entry-title">
<a href="/articles/11656.html" rel="bookmark">开发团队的效率</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/11656.html" title="09:06" rel="bookmark"><time class="entry-date" datetime="2014-06-09T09:06:11+08:00" pubdate="">2014年06月09日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/11656.html#comments" class="comments-link">153 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 178,026 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright size-full wp-image-11700" src="/uploads/2014/06/software_development.png" alt="" width="230" height="231" srcset="" sizes="(max-width: 230px) 100vw, 230px"/>我之前写过一篇叫《<a title="加班与效率" href="/articles/10217.html" target="_blank">加班与效率</a>》的文章，从概念上说了一些我对“效率”的认识，但是那篇文章趋于概念化，对于一些没有经历过这样的环境的同学来说，可能会觉得太抽象了。很早以前就想写一篇更具体一点的，可执行的文章与《<a title="加班与效率" href="/articles/10217.html" target="_blank">加班与效率</a>》这篇文章相辉映，并再把我两年前在杭州QCon上的那个<a href="http://vdisk.weibo.com/s/gN-sQ/1351485199" target="_blank">“<strong>鼓吹工程师文化”的《建一支强大的小团队》</strong></a>（新浪微盘）的观点再加强一下。</p>
<p><strong>但是我遇到了一些思维方式上的麻烦——我讲的总是从我的经历背景出发，没有从其它人的经历背景来讲</strong>。这就好像，我在酷壳里说了很多东西（比如：<a title="我们需要专职的QA吗？" href="/articles/6994.html" target="_blank">专职的QA</a>，<a title="从Code Review 谈如何做技术" href="/articles/11432.html" target="_blank">Code Review很重要</a>，<a title="编程能力与编程年龄" href="/articles/10688.html" target="_blank">编程年龄</a>，<a title="来信， 创业 和 移动互联网" href="/articles/5815.html" target="_blank">创业的</a>，<a title="《Rework》摘录及感想" href="/articles/9156.html" target="_blank">Rework</a>的……），有好些人觉得是不可能甚至太理想，其实我说的那些东西都是实实在在存在的，也是我所经历过的。于是，不同的经历，不同的环境，不同的眼界，造成了——有些人不理解我说的，而我也不能理解他们所说的。</p>
<p>所以，过去的这段时间我一有机会就找一些人交流并观察一些身边的事情，并去试着跟从和理解那些我不能理解的东西。现在觉得差不多了，所以，写下了这篇文章。（但越是去理解对方，我就越坚持我的观点，所以这篇文章可能还是会出现鸡同鸭讲的情形，无所谓了）</p>
<p>本文不讨论任何业务上的效率问题，只讨论软件开发或是软件工程中的效率问题。虽然产品和业务上的效率问题是根本，但是因为本文不是拉仇恨的，我也不想混在一起谈，所以请原谅我在这里先说开发团队的，以后重新开篇文章专门谈产品和业务的。</p>
<p>我下面会罗列几个非常典型的开发方式——<strong>软件开发中的“锁”</strong>，<strong>接力棒式软件开发</strong>，<strong>保姆式软件开发</strong>，<strong>WatchDog软件开发</strong>，<strong>故障驱动式软件开发</strong>。</p>
<p> <a href="/articles/11656.html#more-11656" class="more-link">…</a></p><a href="/articles/11656.html#more-11656" class="more-link">
</a><p class="read-more"><a href="/articles/11656.html#more-11656" class="more-link"></a><a class="btn btn-default" href="/articles/11656.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-11656-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-11609" class="post-content post-11609 post type-post status-publish format-standard hentry category-progdesign category-proglanguage category-netsecurity tag-congestion-avoidance tag-fast-recovery tag-rto tag-rtt tag-tcp tag-window">
<header class="entry-header">
<span class="screen-reader-text">TCP 的那些事儿（下）</span>
<h2 class="entry-title">
<a href="/articles/11609.html" rel="bookmark">TCP 的那些事儿（下）</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/11609.html" title="08:20" rel="bookmark"><time class="entry-date" datetime="2014-05-28T08:20:32+08:00" pubdate="">2014年05月28日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/11609.html#comments" class="comments-link">162 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 284,148 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright wp-image-11641" src="/uploads/2014/05/xin_2001040422167711230318.jpg" alt="" width="360" height="244" srcset="" sizes="(max-width: 360px) 100vw, 360px"/>这篇文章是下篇，所以如果你对TCP不熟悉的话，还请你先看看上篇《<a href="/articles/11564.html" target="_blank">TCP的那些事儿（上）</a>》 上篇中，我们介绍了TCP的协议头、状态机、数据重传中的东西。但是TCP要解决一个很大的事，那就是要在一个网络根据不同的情况来动态调整自己的发包的速度，小则让自己的连接更稳定，大则让整个网络更稳定。在你阅读下篇之前，你需要做好准备，本篇文章有好些算法和策略，可能会引发你的各种思考，让你的大脑分配很多内存和计算资源，所以，不适合在厕所中阅读。</p>
<h4>TCP的RTT算法</h4>
<p>从前面的TCP重传机制我们知道Timeout的设置对于重传非常重要。</p>
<ul>
<li>设长了，重发就慢，丢了老半天才重发，没有效率，性能差；</li>
<li>设短了，会导致可能并没有丢就重发。于是重发的就快，会增加网络拥塞，导致更多的超时，更多的超时导致更多的重发。</li>
</ul>
<p>而且，这个超时时间在不同的网络的情况下，根本没有办法设置一个死的值。只能动态地设置。 为了动态地设置，TCP引入了RTT——Round Trip Time，也就是一个数据包从发出去到回来的时间。这样发送端就大约知道需要多少的时间，从而可以方便地设置Timeout——RTO（Retransmission TimeOut），以让我们的重传机制更高效。 听起来似乎很简单，好像就是在发送端发包时记下t0，然后接收端再把这个ack回来时再记一个t1，于是RTT = t1 – t0。没那么简单，这只是一个采样，不能代表普遍情况。</p>
<p> <a href="/articles/11609.html#more-11609" class="more-link">…</a></p><a href="/articles/11609.html#more-11609" class="more-link">
</a><p class="read-more"><a href="/articles/11609.html#more-11609" class="more-link"></a><a class="btn btn-default" href="/articles/11609.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-11609-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-11564" class="post-content post-11564 post type-post status-publish format-standard hentry category-progdesign category-proglanguage category-netsecurity tag-ack tag-isn tag-msl tag-sack tag-syn tag-tcp tag-time_wait">
<header class="entry-header">
<span class="screen-reader-text">TCP 的那些事儿（上）</span>
<h2 class="entry-title">
<a href="/articles/11564.html" rel="bookmark">TCP 的那些事儿（上）</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/11564.html" title="08:15" rel="bookmark"><time class="entry-date" datetime="2014-05-28T08:15:36+08:00" pubdate="">2014年05月28日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/11564.html#comments" class="comments-link">237 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 488,049 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright wp-image-11654" src="/uploads/2014/05/tin-can-phone.jpg" alt="" width="360" height="257" srcset="" sizes="(max-width: 360px) 100vw, 360px"/>TCP是一个巨复杂的协议，因为他要解决很多问题，而这些问题又带出了很多子问题和阴暗面。所以学习TCP本身是个比较痛苦的过程，但对于学习的过程却能让人有很多收获。关于TCP这个协议的细节，我还是推荐你去看<a href="http://www.kohala.com/start/" target="_blank">W.Richard Stevens</a>的《<a href="http://book.douban.com/subject/1088054/" target="_blank">TCP/IP 详解 卷1：协议</a>》（当然，你也可以去读一下<a href="http://tools.ietf.org/html/rfc793" target="_blank">RFC793</a>以及后面N多的RFC）。另外，本文我会使用英文术语，这样方便你通过这些英文关键词来查找相关的技术文档。</p>
<p>之所以想写这篇文章，目的有三个，</p>
<ul>
<li>一个是想锻炼一下自己是否可以用简单的篇幅把这么复杂的TCP协议描清楚的能力。</li>
<li>另一个是觉得现在的好多程序员基本上不会认认真真地读本书，喜欢快餐文化，所以，希望这篇快餐文章可以让你对TCP这个古典技术有所了解，并能体会到软件设计中的种种难处。并且你可以从中有一些软件设计上的收获。</li>
<li>最重要的希望这些基础知识可以让你搞清很多以前一些似是而非的东西，并且你能意识到基础的重要。</li>
</ul>
<p>所以，本文不会面面俱到，只是对TCP协议、算法和原理的科普。</p>
<p> <a href="/articles/11564.html#more-11564" class="more-link">…</a></p><a href="/articles/11564.html#more-11564" class="more-link">
</a><p class="read-more"><a href="/articles/11564.html#more-11564" class="more-link"></a><a class="btn btn-default" href="/articles/11564.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-11564-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-11629" class="post-content post-11629 post type-post status-publish format-standard hentry category-misc tag-programmer tag-58">
<header class="entry-header">
<span class="screen-reader-text">「我只是认真」聊聊工匠情怀</span>
<h2 class="entry-title">
<a href="/articles/11629.html" rel="bookmark">「我只是认真」聊聊工匠情怀</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/11629.html" title="11:20" rel="bookmark"><time class="entry-date" datetime="2014-05-26T11:20:55+08:00" pubdate="">2014年05月26日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/articles/author/hesey" title="View all posts by 王 晨纯" rel="author">王 晨纯</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/11629.html#comments" class="comments-link">78 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 74,347 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><strong style="color: #555555;">（感谢网友 <a style="color: #2970a6;" href="http://weibo.com/tbmujian" target="_blank">@Hesey小纯纯</a> 投稿  <a style="color: #2970a6;" href="http://blog.hesey.net/" target="_blank">博客</a> |　<a style="color: #2970a6;" href="http://blog.hesey.net/2014/05/im-just-conscientious-talking-about-feelings-of-artisans.html" target="_blank">原文链接</a>）</strong></p>
<p>老罗的Smartisan T1手机发布会很多人应该都看了，发布会的最后老罗凝视着自己的工匠自画像，半晌没说话，随后转过身，慢慢离开舞台，屏幕下方只留下一句话：</p>
<p style="padding-left: 30px;"><strong>我不是为了输赢，我就是认真。</strong></p>
<p>这一瞬间让我想起93年「狮城舌战」的主角蒋昌建，在「人性本善还是人性本恶」的总结陈词最后，以顾城的名句，「黑夜给了我黑色的眼睛，我却用它寻找光明」，把整个辩论赛的氛围推向高潮。</p>
<p>而老罗的这句话，和这句话背后的工匠背景，却以另外一种<strong>无声的却震人心魄的力量</strong>，敲打着每一个在场的，或是观看着整个发布会的观众的心绪。</p>
<p>「工匠情怀」，我深有体会，就像我在 <a href="http://blog.hesey.net/2014/05/gc-oriented-java-programming.html" target="_blank">面向GC的Java编程</a> 一文中所提到的：</p>
<p style="padding-left: 30px;"><strong>优秀程序员的价值，不在于其所掌握的几招屠龙之术，而是在细节中见真著。</strong></p>
<p style="padding-left: 30px;"><strong>如果我们可以一次把事情做对，并且做好，在允许的范围内尽可能追求卓越，为什么不去做呢？</strong></p>
<p>追求卓越，追求完美，追求细节的极致。小时候看到那些修表匠，握着一个小螺丝刀，或是看着电工，用烙铁沾着锡和松香，在那一小寸的世界里，把坏了的地方修好，那种专注的眼神，觉得很厉害。</p>
<p>现在再去回想那些工匠工作的场景，越发觉得钦佩。在我老家有一家刻章的店，在我上幼儿园的时候就已经在那开了很多年了。前段时间需要刻一个章，发现那家店还在，于是走进去，门口坐着一个老人，我确实记不得当年是不是他，不过看这岁数八九不离十。我以前在别的地方刻的章，都是在电脑里设计完图案后，激光刻蚀。但那次老人却是用的手刻，我着实惊呆了。只看他拿出一块红色的印底，右手持着刻刀，开始一下一下地刻着。虽然老人连话都不怎么说得清了，但是工作时那专注的神情，和精湛的手艺，以及最后成品那比机器更完美的效果，着实让我心里非常动容。</p>
<p> <a href="/articles/11629.html#more-11629" class="more-link">…</a></p><a href="/articles/11629.html#more-11629" class="more-link">
</a><p class="read-more"><a href="/articles/11629.html#more-11629" class="more-link"></a><a class="btn btn-default" href="/articles/11629.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-11629-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-11541" class="post-content post-11541 post type-post status-publish format-standard hentry category-javadev tag-gc tag-java tag-jvm">
<header class="entry-header">
<span class="screen-reader-text">面向GC的Java编程</span>
<h2 class="entry-title">
<a href="/articles/11541.html" rel="bookmark">面向GC的Java编程</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/11541.html" title="11:24" rel="bookmark"><time class="entry-date" datetime="2014-05-07T11:24:38+08:00" pubdate="">2014年05月07日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/articles/author/hesey" title="View all posts by 王 晨纯" rel="author">王 晨纯</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/11541.html#comments" class="comments-link">46 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 60,400 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><strong>（感谢网友 <a href="http://weibo.com/tbmujian" target="_blank">@Hesey小纯纯</a> 投稿  <a href="http://blog.hesey.net/" target="_blank">博客</a> |　<a href="http://blog.hesey.net/2014/05/gc-oriented-java-programming.html" target="_blank">原文链接</a>）</strong></p>
<p>Java程序员在编码过程中通常不需要考虑内存问题，JVM经过高度优化的GC机制大部分情况下都能够很好地处理堆(Heap)的清理问题。以至于许多Java程序员认为，我只需要关心何时创建对象，而回收对象，就交给GC来做吧！甚至有人说，如果在编程过程中频繁考虑内存问题，是一种退化，这些事情应该交给编译器，交给虚拟机来解决。</p>
<p>这话其实也没有太大问题，的确，大部分场景下关心内存、GC的问题，显得有点“杞人忧天”了，高老爷说过：</p>
<p style="padding-left: 30px;">过早优化是万恶之源。</p>
<p>但另一方面，<strong>什么才是“过早优化”？</strong></p>
<p style="padding-left: 30px;">If we could do things right for the first time, why not?</p>
<p>事实上<strong>JVM的内存模型</strong>( <a href="http://www.cs.umd.edu/~pugh/java/memoryModel/" target="_blank">JMM</a> )理应是Java程序员的基础知识，处理过几次JVM线上内存问题之后就会很明显感受到，很多系统问题，都是内存问题。</p>
<p>对JVM内存结构感兴趣的同学可以看下 <a href="http://blog.hesey.net/2011/04/introduction-to-java-virtual-machine.html" target="_blank">浅析Java虚拟机结构与机制</a> 这篇文章，本文就不再赘述了，本文也并不关注具体的GC算法，相关的文章汗牛充栋，随时可查。</p>
<p>另外，不要指望GC优化的这些技巧，可以对应用性能有成倍的提高，特别是对I/O密集型的应用，或是实际落在YoungGC上的优化，可能效果只是帮你减少那么一点YoungGC的频率。</p>
<p>但我认为，<strong>优秀程序员的价值，不在于其所掌握的几招屠龙之术，而是在细节中见真著</strong>，就像前面说的，<strong>如果我们可以一次把事情做对，并且做好，在允许的范围内尽可能追求卓越，为什么不去做呢？</strong> <a href="/articles/11541.html#more-11541" class="more-link">…</a></p><a href="/articles/11541.html#more-11541" class="more-link">
</a><p class="read-more"><a href="/articles/11541.html#more-11541" class="more-link"></a><a class="btn btn-default" href="/articles/11541.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-11541-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-11466" class="post-content post-11466 post type-post status-publish format-standard hentry category-cplusplus category-progdesign category-proglanguage category-netsecurity tag-c tag-overflow tag-318">
<header class="entry-header">
<span class="screen-reader-text">C语言的整型溢出问题</span>
<h2 class="entry-title">
<a href="/articles/11466.html" rel="bookmark">C语言的整型溢出问题</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/11466.html" title="08:18" rel="bookmark"><time class="entry-date" datetime="2014-04-21T08:18:01+08:00" pubdate="">2014年04月21日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/11466.html#comments" class="comments-link">96 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 109,639 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p>整型溢出有点老生常谈了，bla, bla, bla… 但似乎没有引起多少人的重视。整型溢出会有可能导致缓冲区溢出，缓冲区溢出会导致各种黑客攻击，比如最近OpenSSL的heartbleed事件，就是一个buffer overread的事件。在这里写下这篇文章，希望大家都了解一下整型溢出，编译器的行为，以及如何防范，以写出更安全的代码。</p>
<h4>什么是整型溢出</h4>
<p>C语言的整型问题相信大家并不陌生了。对于整型溢出，分为无符号整型溢出和有符号整型溢出。</p>
<p><strong>对于unsigned整型溢出，C的规范是有定义的</strong>——“溢出后的数会以2^(8*sizeof(type))作模运算”，也就是说，如果一个unsigned char（1字符，8bits）溢出了，会把溢出的值与256求模。例如：</p>
<pre class="EnlighterJSRAW" data-enlighter-language="c">unsigned char x = 0xff;
printf(&#34;%d\n&#34;, ++x);</pre>
<p>上面的代码会输出：0 （因为0xff + 1是256，与2^8求模后就是0）</p>
<p><strong>对于signed整型的溢出，C的规范定义是“undefined behavior”</strong>，也就是说，编译器爱怎么实现就怎么实现。对于大多数编译器来说，算得啥就是啥。比如：</p>
<pre class="EnlighterJSRAW" data-enlighter-language="c">signed char x =0x7f; //注：0xff就是-1了，因为最高位是1也就是负数了
printf(&#34;%d\n&#34;, ++x);</pre>
<p>上面的代码会输出：-128，因为0x7f + 0x01得到0x80，也就是二进制的1000 0000，符号位为1，负数，后面为全0，就是负的最小数，即-128。</p>
<p> <a href="/articles/11466.html#more-11466" class="more-link">…</a></p><a href="/articles/11466.html#more-11466" class="more-link">
</a><p class="read-more"><a href="/articles/11466.html#more-11466" class="more-link"></a><a class="btn btn-default" href="/articles/11466.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-11466-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-11454" class="post-content post-11454 post type-post status-publish format-standard hentry category-javadev category-progdesign tag-atomiclong tag-cas tag-java tag-longadder tag-performance">
<header class="entry-header">
<span class="screen-reader-text">从LongAdder看更高效的无锁实现</span>
<h2 class="entry-title">
<a href="/articles/11454.html" rel="bookmark">从LongAdder看更高效的无锁实现</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/11454.html" title="23:11" rel="bookmark"><time class="entry-date" datetime="2014-04-17T23:11:40+08:00" pubdate="">2014年04月17日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/articles/author/liuinsect" title="View all posts by liuinsect" rel="author">liuinsect</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/11454.html#comments" class="comments-link">35 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 47,371 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><strong>（感谢 <a href="http://weibo.com/liuinsect" target="_blank">@jd刘锟洋</a> 投稿，更多文章参看他的博客：<a href="http://www.liuinsect.com/" target="_blank">码梦为生</a>）</strong></p>
<p><strong>原文链接</strong>：《<a href="http://www.liuinsect.com/2014/04/15/%E6%AF%94atomiclong%E8%BF%98%E9%AB%98%E6%95%88%E7%9A%84longadder-%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" target="_blank">比AtomicLong还高效的LongAdder 源码解析</a>》</p>
<p>接触到AtomicLong的原因是在看guava的LoadingCache相关代码时，关于LoadingCache，其实思路也非常简单清晰：用模板模式解决了缓存不命中时获取数据的逻辑，这个思路我早前也正好在项目中使用到。</p>
<p>言归正传，为什么说LongAdder引起了我的注意，原因有二：</p>
<ol>
<li>作者是Doug lea ，地位实在举足轻重。</li>
<li>他说这个比AtomicLong高效。</li>
</ol>
<p>我们知道，AtomicLong已经是非常好的解决方案了，涉及并发的地方都是使用CAS操作，在硬件层次上去做 compare and set操作。效率非常高。</p>
<p>因此，我决定研究下，为什么LongAdder比AtomicLong高效。</p>
<p>首先，看LongAdder的继承树：</p>
<p><img decoding="async" loading="lazy" class="alignnone size-full wp-image-209 aligncenter" alt="la1" src="http://www.liuinsect.com/wp-content/uploads/2014/04/la1.png" width="431" height="104"/></p>
<p>继承自Striped64，这个类包装了一些很重要的内部类和操作。稍候会看到。</p>
<p> <a href="/articles/11454.html#more-11454" class="more-link">…</a></p><a href="/articles/11454.html#more-11454" class="more-link">
</a><p class="read-more"><a href="/articles/11454.html#more-11454" class="more-link"></a><a class="btn btn-default" href="/articles/11454.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-11454-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-11432" class="post-content post-11432 post type-post status-publish format-standard hentry category-550 category-process tag-code-review tag-programmer tag-58">
<header class="entry-header">
<span class="screen-reader-text">从Code Review 谈如何做技术</span>
<h2 class="entry-title">
<a href="/articles/11432.html" rel="bookmark">从Code Review 谈如何做技术</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/11432.html" title="16:28" rel="bookmark"><time class="entry-date" datetime="2014-04-12T16:28:01+08:00" pubdate="">2014年04月12日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/11432.html#comments" class="comments-link">218 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 205,664 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright size-medium wp-image-11440" alt="" src="/uploads/2014/04/code_review-225x300.jpg" width="225" height="300" srcset="" sizes="(max-width: 225px) 100vw, 225px"/>（这篇文章缘由我的微博，我想多说一些，有些杂乱，想到哪写到哪）</p>
<p>这两天，在微博上表达了一下Code Review的重要性。因为翻看了阿里内部的Review Board上的记录，从上面发现Code Review做得好的是一些比较偏技术的团队，而偏业务的技术团队基本上没有看到Code Review的记录。当然，这并不能说没有记录他们就没有做Code Review，于是，我就问了一下以前在业务团队做过的同事有没有Code Review，他告诉我不但没有Code Review，而且他认为Code Review没用，因为：</p>
<p style="padding-left: 30px;">1）工期压得太紧，时间连coding都不够，以上线为目的，</p>
<p style="padding-left: 30px;">2）需求老变，代码的生命周期太短。所以，写好的代码没有任何意义，烂就烂吧，反正与绩效无关。</p>
<p>我心里非常不认同这样的观点，我觉得我是程序员，我是工程师，就像医生一样，不是把病人医好就好了，还要对病人的长期健康负责。对于常见病，要很快地医好病人很简单，下猛药，大量使用抗生素，好得飞快。但大家都知道，这明显是“饮鸩止渴”、“竭泽而渔”的做法。医生需要有责任心和医德，我也觉得程序员工程师也要有相应的责任心和相应的修养。东西交给我我必需要负责，我觉得这种负责和修养不是”做出来“就了事了，而是要到“做漂亮”这个级别，这就是“山寨”和“工业”的差别。而只以“做出来”为目的标准，我只能以为，这样的做法只不过是“按部就班”的堆砌代码罢了，和劳动密集型的“装配生产线”和“砌砖头”没有什么差别，在这种环境里呆着还不如离开。</p>
<p>老实说，因为去年我在业务团队的时候，我的团队也没有做Code Review，原因是多样的。其中一个重要原因是，我刚来阿里，所以，需要做的是在适应阿里的文化，任何公司都有自己的风格和特点，任何公司的做法都有他的理由和成因，对于我这样的一个初来者，首要的是要适应和观察，不要对团队做太多的改动，跟从、理解和信任是融入的关键。（注：在建北京团队和不要专职的测试人员上我都受到了一些阻力），所以跟着团队走没有玩Code Review。干了一年后，觉得我妥协了很多我以前所坚持的东西，觉得自己的标准在降低，想一想后背拔凉拔凉的，所以我决定坚持，而且还要坚持高标准。</p>
<p> <a href="/articles/11432.html#more-11432" class="more-link">…</a></p><a href="/articles/11432.html#more-11432" class="more-link">
</a><p class="read-more"><a href="/articles/11432.html#more-11432" class="more-link"></a><a class="btn btn-default" href="/articles/11432.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-11432-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<nav class="navigation posts-navigation" role="navigation">
<h2 class="screen-reader-text">Posts navigation</h2>
<div class="nav-links">
<div class="row">
<div class="wp-pagenavi" role="navigation">
<span class="pages">第 9 / 74 页</span><a class="first" aria-label="First Page" href="/">« 首页</a><a class="previouspostslink" rel="prev" aria-label="上一页" href="/page/8.html">«</a><span class="extend">...</span><a class="page smaller" title="第 5 页" href="/page/5.html">5</a><a class="page smaller" title="第 6 页" href="/page/6.html">6</a><a class="page smaller" title="第 7 页" href="/page/7.html">7</a><a class="page smaller" title="第 8 页" href="/page/8.html">8</a><span aria-current="page" class="current">9</span><a class="page larger" title="第 10 页" href="/page/10.html">10</a><a class="page larger" title="第 11 页" href="/page/11.html">11</a><a class="page larger" title="第 12 页" href="/page/12.html">12</a><a class="page larger" title="第 13 页" href="/page/13.html">13</a><a class="page larger" title="第 14 页" href="/page/14.html">14</a><span class="extend">...</span><a class="larger page" title="第 20 页" href="/page/20.html">20</a><a class="larger page" title="第 30 页" href="/page/30.html">30</a><a class="larger page" title="第 40 页" href="/page/40.html">40</a><a class="larger page" title="第 50 页" href="/page/50.html">50</a><a class="larger page" title="第 60 页" href="/page/60.html">60</a><span class="extend">...</span><a class="nextpostslink" rel="next" aria-label="下一页" href="/page/10.html">»</a><a class="last" aria-label="Last Page" href="/page/74.html">末页 »</a>
</div>
</div>
</div>
</nav>
</main>
</div>

</div>
</div>

</div>

</div>















</body></html>