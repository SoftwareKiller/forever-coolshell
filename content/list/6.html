<!DOCTYPE html><!--[if IE 8]>
<html id="ie8" dir="ltr" lang="zh-CN"
	prefix="og: https://ogp.me/ns#" >
<![endif]--><!--[if !(IE 8) ]><!--><html dir="ltr" lang="zh-CN" prefix="og: https://ogp.me/ns#"><!--<![endif]--><head><meta charset="UTF-8"/><title>酷壳 – CoolShell.cn - Part 6</title><link rel="stylesheet" type="text/css" href="/assets/all.min.css"/><link rel="shortcut icon" href="/assets/favicon.png"/></head>
<body class="home blog paged paged-6 group-blog">

<div id="page" class="hfeed site">
<header id="masthead" role="banner">

<div id="cc_spacer"></div>
<div class="site-header">

<div class="site-branding">
<a class="home-link" href="/" title="酷 壳 – CoolShell" rel="home">
<h1 class="site-title">酷 壳 – CoolShell</h1>
<h2 class="site-description">享受编程和技术所带来的快乐 – Coding Your Ambition</h2>
</a>
</div>
</div>
</header>
<div class="container">
<div class="row">

</div>
</div>
<div id="content" class="site-content">
<div class="container">
<div class="row">
<div id="primary" class="content-area  col-md-12" style="margin-top: 40px;">
<main id="main" class="site-main" role="main">
<article id="post-17757" class="post-content post-17757 post type-post status-publish format-standard hentry category-cplusplus category-progdesign category-proglanguage tag-code-review tag-programming tag-refactory">
<header class="entry-header">
<span class="screen-reader-text">如何重构“箭头型”代码</span>
<h2 class="entry-title">
<a href="/articles/17757.html" rel="bookmark">如何重构“箭头型”代码</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/17757.html" title="18:07" rel="bookmark"><time class="entry-date" datetime="2017-04-05T18:07:14+08:00" pubdate="">2017年04月05日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/17757.html#comments" class="comments-link">56 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 103,483 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p>本文主要起因是，一次在微博上和朋友关于嵌套好几层的if-else语句的代码重构的讨论（<a href="http://weibo.com/1401880315/ECmCW0oy2" target="_blank" rel="noopener noreferrer">微博原文</a>），在微博上大家有各式各样的问题和想法。按道理来说这些都是编程的基本功，似乎不太值得写一篇文章，不过我觉得很多东西可以从一个简单的东西出发，到达本质，所以，我觉得有必要在这里写一篇的文章。不一定全对，只希望得到更多的讨论，因为有了更深入的讨论才能进步。</p>
<p>文章有点长，我在文章最后会给出相关的思考和总结陈词，你可以跳到结尾。</p>
<p>所谓箭头型代码，基本上来说就是下面这个图片所示的情况。</p>
<p><img decoding="async" class="aligncenter wp-image-17758 size-full" src="/uploads/2017/04/IMG_7411.jpg" alt="" width="720" height="511" srcset="" sizes="(max-width: 720px) 100vw, 720px"/></p>
<p>那么，这样“箭头型”的代码有什么问题呢？看上去也挺好看的，有对称美。但是……</p>
<p>关于箭头型代码的问题有如下几个：</p>
<p> <a href="/articles/17757.html#more-17757" class="more-link">…</a></p><a href="/articles/17757.html#more-17757" class="more-link">
</a><p class="read-more"><a href="/articles/17757.html#more-17757" class="more-link"></a><a class="btn btn-default" href="/articles/17757.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-17757-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-17737" class="post-content post-17737 post type-post status-publish format-standard hentry category-itnews category-misc category-progdesign tag-amazon-s3 tag-aws tag-design tag-high-availability">
<header class="entry-header">
<span class="screen-reader-text">AWS 的 S3 故障回顾和思考</span>
<h2 class="entry-title">
<a href="/articles/17737.html" rel="bookmark">AWS 的 S3 故障回顾和思考</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/17737.html" title="14:20" rel="bookmark"><time class="entry-date" datetime="2017-03-03T14:20:03+08:00" pubdate="">2017年03月03日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/17737.html#comments" class="comments-link">56 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 66,209 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright wp-image-17738" src="/uploads/2017/03/Amazon-Web-Services-Down.png" width="360" height="197" srcset="" sizes="(max-width: 360px) 100vw, 360px"/>继<a href="/articles/17680.html" target="_blank">Gitlab的误删除数据事件</a>没几天，“不沉航母” AWS S3 （Simple Storage Service）几天前也“沉”了4个小时，墙外的半个互联网也跟着挂了。如约，按 AWS 惯例，AWS今天给出了一个简单的故障报告《<span class="s1"><a href="https://aws.amazon.com/cn/message/41926/" target="_blank">Summary of the Amazon S3 Service Disruption in the Northern Virginia (US-EAST-1) Region</a>》。这个故障和简单来说和Gitlab一样，也是人员误操作。先简单的说一下这份报中说了什么。</span></p>
<h4>故障原因</h4>
<p>简单来说，这天，有一个 AWS 工程师在调查 <span class="s1">Northern Virginia (US-EAST-1) Region 上 S3 的一个和账务系统相关的问题，这个问题是S3的账务系统变慢了（我估计这个故障在Amazon里可能是Sev2级，Sev2级的故障在Amazon算是比较大的故障，需要很快解决），Oncall的开发工程师（注：Amazon的运维都是由开发工程师来干的，所以Amazon内部嬉称SDE-Software Developer Engineer 为 Someone Do Everything）想移除一个账务系统里的一个子系统下的一些少量的服务器（估计这些服务器上有问题，所以想移掉后重新部署），结果呢，有一条命令搞错了，导致了移除了大量的S3的控制系统。包括两个很重要的子系统：</span></p>
<p> <a href="/articles/17737.html#more-17737" class="more-link">…</a></p><a href="/articles/17737.html#more-17737" class="more-link">
</a><p class="read-more"><a href="/articles/17737.html#more-17737" class="more-link"></a><a class="btn btn-default" href="/articles/17737.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-17737-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-17680" class="post-content post-17680 post type-post status-publish format-standard hentry category-technews category-progdesign category-602 tag-design tag-gitlab tag-high-availability tag-programmer tag-704 tag-58">
<header class="entry-header">
<span class="screen-reader-text">从Gitlab误删除数据库想到的</span>
<h2 class="entry-title">
<a href="/articles/17680.html" rel="bookmark">从Gitlab误删除数据库想到的</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/17680.html" title="16:11" rel="bookmark"><time class="entry-date" datetime="2017-02-02T16:11:28+08:00" pubdate="">2017年02月02日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/17680.html#comments" class="comments-link">67 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 110,993 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright wp-image-17685" src="/uploads/2017/02/gitlab-600.jpg" width="300" height="215" srcset="" sizes="(max-width: 300px) 100vw, 300px"/>昨天，Gitlab.com发生了一个大事，某同学误删了数据库，这个事看似是个低级错误，不过，因为Gitlab把整个过程的细节都全部暴露出来了，所以，可以看到很多东西，而对于类似这样的事情，我自己以前也干过，而在最近的两公司中我也见过（Amazon中见过一次，阿里中见过至少四次），正好通过这个事来说说一下自己的一些感想和观点吧。<strong>我先放个观点：你觉得有备份系统就不会丢数据了吗？</strong></p>
<h4>事件回顾</h4>
<p>整个事件的回顾Gitlab.com在第一时间就放到了<a href="https://docs.google.com/document/d/1GCK53YDcBWQveod9kfzW-VCxIABGiryG7_z_6jHdVik/pub" target="_blank">Google Doc上</a>，事后，又发了<a href="https://about.gitlab.com/2017/02/01/gitlab-dot-com-database-incident/" target="_blank">一篇Blog</a>来说明这个事，在这里，我简单的回顾一下这个事件的过程。</p>
<p>首先，一个叫YP的同学在给gitlab的线上数据库做一些负载均衡的工作，在做这个工作时的时候突发了一个情况，Gitlab被DDoS攻击，数据库的使用飙高，在block完攻击者的IP后，发现有个staging的数据库(db2.staging)已经落后生产库4GB的数据，于是YP同学在Fix这个staging库的同步问题的时候，发现db2.staging有各种问题都和主库无法同步，在这个时候，YP同学已经工作的很晚了，在尝试过多个方法后，发现db2.staging都hang在那里，无法同步，于是他想把db2.staging的数据库删除了，这样全新启动一个新的复制，结果呢，删除数据库的命令错误的敲在了生产环境上（db1.cluster），结果导致整个生产数据库被误删除。（<strong>陈皓注：这个失败基本上就是 “工作时间过长” + “在多数终端窗口中切换中迷失掉了”</strong>）</p>
<p> <a href="/articles/17680.html#more-17680" class="more-link">…</a></p><a href="/articles/17680.html#more-17680" class="more-link">
</a><p class="read-more"><a href="/articles/17680.html#more-17680" class="more-link"></a><a class="btn btn-default" href="/articles/17680.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-17680-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-17634" class="post-content post-17634 post type-post status-publish format-standard hentry category-webdev category-tools tag-chrome tag-css tag-html tag-javascript">
<header class="entry-header">
<span class="screen-reader-text">Chrome开发者工具的小技巧</span>
<h2 class="entry-title">
<a href="/articles/17634.html" rel="bookmark">Chrome开发者工具的小技巧</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/17634.html" title="20:25" rel="bookmark"><time class="entry-date" datetime="2017-01-19T20:25:55+08:00" pubdate="">2017年01月19日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/17634.html#comments" class="comments-link">63 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 97,281 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p>Chrome的开发者工具是个很强大的东西，相信程序员们都不会陌生，不过有些小功能可能并不为大众所知，所以，写下这篇文章罗列一下可能你所不知道的功能，有的功能可能会比较实用，有的则不一定，也欢迎大家补充交流。</p>
<p>话不多话，我们开始。</p>
<h4>代码格式化</h4>
<p>有很多css/js的代码都会被 minify 掉，你可以点击代码窗口左下角的那个 <strong><code>{ }</code></strong>  标签，chrome会帮你给格式化掉。</p>
<p><img decoding="async" loading="lazy" class="aligncenter size-full wp-image-17640" src="/uploads/2017/01/pretty-code.gif" alt="" width="707" height="319" srcset=""/></p>
<p> <a href="/articles/17634.html#more-17634" class="more-link">…</a></p><a href="/articles/17634.html#more-17634" class="more-link">
</a><p class="read-more"><a href="/articles/17634.html#more-17634" class="more-link"></a><a class="btn btn-default" href="/articles/17634.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-17634-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-17607" class="post-content post-17607 post type-post status-publish format-standard hentry category-technews category-netsecurity tag-bitcoin tag-mongodb tag-ransom tag-318">
<header class="entry-header">
<span class="screen-reader-text">从 MongoDB “赎金事件” 看安全问题</span>
<h2 class="entry-title">
<a href="/articles/17607.html" rel="bookmark">从 MongoDB “赎金事件” 看安全问题</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/17607.html" title="17:11" rel="bookmark"><time class="entry-date" datetime="2017-01-07T17:11:28+08:00" pubdate="">2017年01月07日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/17607.html#comments" class="comments-link">44 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 81,557 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright size-sup_wechat_big wp-image-17621" src="/uploads/2017/01/MongoDB-360x200.jpg" alt="" width="360" height="200" srcset=""/>今天上午（2017年1月7日），我的微信群中同时出现了两个MongoDB被黑掉要赎金的情况，于是在调查过程中，发现了这个事件。这个事件应该是2017年开年的第一次比较大的安全事件吧，发现国内居然没有什么报道，国内安全圈也没有什么动静（当然，他们也许知道，只是不想说吧），Anyway，让我这个非安全领域的人来帮补补位。</p>
<h4>事件回顾</h4>
<p>这个事情应该是从2017年1月3日进入公众视野的，是由安全圈的大拿 Victor Gevers （网名：<a href="https://twitter.com/0xDUDE" target="_blank">0xDUDE</a>，<span class="js-display-url"><a class="twitter-timeline-link" dir="ltr" title="http://GDI.foundation" href="http://GDI.foundation" target="_blank" rel="nofollow noopener" data-expanded-url="http://GDI.foundation">GDI.foundation</a> </span>的Chairman），其实，他早在2016年12月27日就发现了一些在互联网上用户的MongoDB没有任何的保护措施，被攻击者把数据库删除了，并留下了一个叫 WARNING 的数据库，这张表的内容如下：</p>
<pre><code class="language-sql">{
    &#34;_id&#34; : ObjectId(&#34;5859a0370b8e49f123fcc7da&#34;),
    &#34;mail&#34; : &#34;<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="b0d8d1c2d1db81c281f0c3d9d7d1d9dec49edfc2d7">[email protected]</a>&#34;,
    &#34;note&#34; : &#34;SEND 0.2 BTC TO THIS ADDRESS 13zaxGVjj9MNc2jyvDRhLyYpkCh323MsMq AND CONTACT THIS EMAIL WITH YOUR IP OF YOUR SERVER TO RECOVER YOUR DATABASE !&#34;
}</code></pre>
<p>基本上如下所示：</p>
<p> <a href="/articles/17607.html#more-17607" class="more-link">…</a></p><a href="/articles/17607.html#more-17607" class="more-link">
</a><p class="read-more"><a href="/articles/17607.html#more-17607" class="more-link"></a><a class="btn btn-default" href="/articles/17607.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-17607-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-17583" class="post-content post-17583 post type-post status-publish format-standard hentry category-misc category-career tag-job tag-programmer tag-58">
<header class="entry-header">
<span class="screen-reader-text">技术人员的发展之路</span>
<h2 class="entry-title">
<a href="/articles/17583.html" rel="bookmark">技术人员的发展之路</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/17583.html" title="12:29" rel="bookmark"><time class="entry-date" datetime="2016-12-28T12:29:25+08:00" pubdate="">2016年12月28日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/17583.html#comments" class="comments-link">192 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 307,654 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright size-sup_wechat_big wp-image-17587" src="/uploads/2016/12/people-360x200.jpg" alt="" width="360" height="200" srcset=""/>2012年的时候写过一篇叫《<a href="/articles/8790.html" target="_blank">程序算法与人生选择</a>》的文章，我用算法来类比如何做选择，说白了就是怎么去计算，但是并没有讲程序员可以发展的方向有哪些。 所以，就算是有这些所谓的方法论，我们可能对自己的发展还是会很纠结和无所事从，尤其是人到了30岁，这种彷徨和迷惑越来越重。虽然我之前也写过一篇《<a href="/articles/10688.html" target="_blank">编程年龄和编程技能</a>》的文章，但是还是有很多做技术的人对于自己能否在年纪大时还能去做技术感到没有信心。我猜测，这其中，最大的问题的是，目前从事技术工作的种种负面的经历（比如经常性的加班，被当成棋子或劳动力等等），让人完全看不到希望和前途，尤其是随着年纪越来越大，对未来的越来越没有信心。</p>
<p>同时，也是因为在GIAC的大会被问到，程序员老了怎么办？而在年底这段时间，也和几个朋友在交流中不断地重复谈到个人发展的这个话题。我的人生过半，活到“不惑”的年纪，自然经常性的对什么事都会回头看看总结归纳，所以，在交谈过程中和交谈过后，自己也有一些思考想记录下来。因为我本人也是在这条路上的人，所以，谈不上给他人指导，我同样也是在瞎乱折腾同样每天在思考自己要去哪儿的“一尘世间迷途老生”。况且，我的经历和眼界非常有限，因此，下面的这些关于个人发展的文字和思考必然是受我的眼界和经历所局限的。也欢迎大家补充和指正。</p>
<p>这些东西不一定对，也不一定就是全部，期许可以让你在年底的时候有所思考，在明年的时候有所计划。</p>
<h4>一个重要阶段和标志</h4>
<p>在讲个人发展之前，我需要先说一下人生中的一个非常重要的阶段——<strong>20到30岁！</strong></p>
<p><strong>这个阶段的首要任务，就是提升自己学习能力和解决难题的能力。</strong><strong>这是一个非常非常关键的时间段！这个时间段几乎决定着你的未来。</strong></p>
<p> <a href="/articles/17583.html#more-17583" class="more-link">…</a></p><a href="/articles/17583.html#more-17583" class="more-link">
</a><p class="read-more"><a href="/articles/17583.html#more-17583" class="more-link"></a><a class="btn btn-default" href="/articles/17583.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-17583-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-17524" class="post-content post-17524 post type-post status-publish format-standard hentry category-misc category-progdesign category-proglanguage tag-closure tag-functional tag-javascript tag-y-combinator">
<header class="entry-header">
<span class="screen-reader-text">如何读懂并写出装逼的函数式代码</span>
<h2 class="entry-title">
<a href="/articles/17524.html" rel="bookmark">如何读懂并写出装逼的函数式代码</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/17524.html" title="17:56" rel="bookmark"><time class="entry-date" datetime="2016-10-23T17:56:29+08:00" pubdate="">2016年10月23日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/17524.html#comments" class="comments-link">66 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 94,541 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" src="/uploads/2016/10/drawing-recursive-300x204.jpg" alt="drawing-recursive" width="300" height="204" class="alignright size-medium wp-image-17535" srcset="" sizes="(max-width: 300px) 100vw, 300px"/>今天在微博上看到了 有人<a href="http://weibo.com/1655747731/Ee4gU0qNn" target="_blank">分享了下面的这段函数式代码</a>，我把代码贴到下面，不过我对原来的代码略有改动，对于函数式的版本，咋一看，的确令人非常费解，仔细看一下，你可能就晕掉了，似乎完全就是天书，看上去非常装逼，哈哈。不过，我感觉解析那段函数式的代码可能会一个比较有趣过程，而且，我以前写过一篇《<a href="/articles/10822.html" target="_blank">函数式编程</a>》的入门式的文章，正好可以用这个例子，再升华一下原来的那篇文章，顺便可以向大家更好的介绍很多基础知识，所以写下这篇文章。</p>
<h4>先看代码</h4>
<p>这个代码平淡无奇，就是从一个数组中找到一个数，O(n)的算法，找不到就返回 null。</p>
<p>下面是正常的 old-school 的方式。不用多说。</p>
<pre data-enlighter-language="js" class="EnlighterJSRAW">//正常的版本
function find (x, y) {
  for ( let i = 0; i &lt; x.length; i++ ) {
    if ( x[i] == y ) return i;
  }
  return null;
}

let arr = [0,1,2,3,4,5]
console.log(find(arr, 2))
console.log(find(arr, 8))</pre>
<p>结果到了函数式成了下面这个样子（好像上面的那些代码在下面若影若现，不过又有点不太一样，为了消掉if语言，让其看上去更像一个表达式，动用了 ? 号表达式）：</p>
<pre data-enlighter-language="js" class="EnlighterJSRAW">//函数式的版本
const find = ( f =&gt; f(f) ) ( f =&gt;
  (next =&gt; (x, y, i = 0) =&gt;
    ( i &gt;= x.length) ?  null :
      ( x[i] == y ) ? i :
        next(x, y, i+1))((...args) =&gt;
          (f(f))(...args)))

let arr = [0,1,2,3,4,5]
console.log(find(arr, 2))
console.log(find(arr, 8))</pre>
<p>为了讲清这个代码，需要先补充一些知识。</p>
<p> <a href="/articles/17524.html#more-17524" class="more-link">…</a></p><a href="/articles/17524.html#more-17524" class="more-link">
</a><p class="read-more"><a href="/articles/17524.html#more-17524" class="more-link"></a><a class="btn btn-default" href="/articles/17524.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-17524-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-17497" class="post-content post-17497 post type-post status-publish format-standard hentry category-550 category-misc category-process category-career tag-programmer tag-58">
<header class="entry-header">
<span class="screen-reader-text">什么是工程师文化？</span>
<h2 class="entry-title">
<a href="/articles/17497.html" rel="bookmark">什么是工程师文化？</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/17497.html" title="16:23" rel="bookmark"><time class="entry-date" datetime="2016-09-18T16:23:11+08:00" pubdate="">2016年09月18日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/17497.html#comments" class="comments-link">124 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 141,768 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright size-full wp-image-17500" src="/uploads/2016/09/engineer.jpg" alt="engineer" width="300" height="203" srcset=""/> 四年前，我在QCon上演讲了一个《<a href="http://www.infoq.com/cn/presentations/Form-powerful-team" target="_blank">建一支强大的小团队</a>》（整理后的<a href="http://vdisk.weibo.com/s/gN-sQ/1351485199">PPT分享于这里</a>）提到了工程师文化，今天，我想在这里再写一篇关于工程师文化的文章，一方面是因为我又有了一些想法和体会，另一方面，因为我也正走在创业的道路，毫无疑问，要建一个有浓重的工程师文化的团队或公司，所以有必要把自己的相关想法形有成白底黑字的“字据”，以供打自己的脸——“要是未来没有做到，这篇文章就打我未来的脸” || “这篇文章太幼稚了，未来的我会打我现在的脸”，当然，如果要打脸，我希望是前者。</p>
<p>Again，<strong>这篇文章不是招人的贴子，因为我觉得，招聘第一重要的事，不是发招聘广告或是找猎头挖人，而是先得让自己变成一个能配得上真正工程师的公司，然后再谈吸引人的事</strong>。</p>
<h4>为什么要工程师文化</h4>
<p>看看最近二十年来社会的发展，计算机和互联网已经渗透到了这个社会的每一个角落，各式各样的计算机技术成为了整个世界发展的强大引擎，各式各样的创新，无论是业务创新还是技术创新，都是依托于技术的快速演进，技术成了解放生产力提高社会运作的效率的中坚力量。以美帝为首的技术创新公司着着实实的改变着这个世界和人类的生活和生产习惯。</p>
<p><strong>今天，每个从事计算机行业的技术人员都应该感到幸运，因为，我们不但选对了行业，也出生在了正确的时代，可以感受到前所未有的刺激和变化，相比起我们的父辈，我们的人生，能经历这样的时代，实在是一种幸运。</strong>所以，选对了职业并出生在了正确的年代的我们，此时只需要思考的一个问题，那就是，我是否呆在了正确的地方用正确的方式做事？</p>
<p> <a href="/articles/17497.html#more-17497" class="more-link">…</a></p><a href="/articles/17497.html#more-17497" class="more-link">
</a><p class="read-more"><a href="/articles/17497.html#more-17497" class="more-link"></a><a class="btn btn-default" href="/articles/17497.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-17497-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-17459" class="post-content post-17459 post type-post status-publish format-standard hentry category-550 category-progdesign category-602 tag-design tag-high-availability tag-paxos tag-programmer tag-704 tag-58">
<header class="entry-header">
<span class="screen-reader-text">关于高可用的系统</span>
<h2 class="entry-title">
<a href="/articles/17459.html" rel="bookmark">关于高可用的系统</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/17459.html" title="12:34" rel="bookmark"><time class="entry-date" datetime="2016-08-21T12:34:53+08:00" pubdate="">2016年08月21日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/17459.html#comments" class="comments-link">87 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 146,940 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright size-medium wp-image-17475" src="/uploads/2016/08/HighAvailability-BK-300x300.png" alt="HighAvailability-BK" width="300" height="300" srcset="" sizes="(max-width: 300px) 100vw, 300px"/>在《<a href="/articles/17446.html" target="_blank">这多年来我一直在钻研的技术</a>》这篇文章中，我讲述了一下，我这么多年来一直在关注的技术领域，其中我多次提到了工业级的软件，我还以为有很多人会问我怎么定义工业级？以及一个高可用性的软件系统应该要怎么干出来？这样我也可以顺理成章的写下这篇文章，但是没有人问，那么，我只好厚颜无耻的自己写下这篇文章了。哈哈。</p>
<p>另外，我在一些讨论高可用系统的地方看到大家只讨论各个公司的技术方案，<strong>其实，高可用的系统并不简单的是技术方案，一个高可用的系统其实还包括很多别的东西，所以，我觉得大家对高可用的系统了解的还不全面，为了让大家的认识更全面，所以，我写下这篇文章</strong>。</p>
<h4>理解高可用系统</h4>
<p>首先，我们需要理解什么是高可用，英文叫High Availability（<a href="https://en.wikipedia.org/wiki/High_availability">Wikipedia词条</a>），基本上来说，就是要让我们的计算环境（包括软硬件）做到full-time的可用性。在设计上一般来说，需要做好如下的设计：</p>
<p> <a href="/articles/17459.html#more-17459" class="more-link">…</a></p><a href="/articles/17459.html#more-17459" class="more-link">
</a><p class="read-more"><a href="/articles/17459.html#more-17459" class="more-link"></a><a class="btn btn-default" href="/articles/17459.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-17459-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-17446" class="post-content post-17446 post type-post status-publish format-standard hentry category-misc tag-programmer tag-806 tag-58">
<header class="entry-header">
<span class="screen-reader-text">这多年来我一直在钻研的技术</span>
<h2 class="entry-title">
<a href="/articles/17446.html" rel="bookmark">这多年来我一直在钻研的技术</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/17446.html" title="18:55" rel="bookmark"><time class="entry-date" datetime="2016-08-18T18:55:17+08:00" pubdate="">2016年08月18日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/17446.html#comments" class="comments-link">134 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 167,523 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright wp-image-17450 size-medium" src="/uploads/2016/08/Architecture-Internships-Abroad-300x215.jpg" alt="Architecture Internships Abroad" width="300" height="215" srcset=""/>因为我是看到tinyfool 《<a href="http://weibo.com/ttarticle/p/show?id=2309404009795043653572" target="_blank">那些年我赶过的时髦技术趋势</a>》，在赞叹的时候，也让我对我有好些回忆，所以想写一篇回忆贴，本来觉得回忆是件挺让人沮喪的事，因为是老了的表现，但我写着写着，就歪了楼。看来，我还不老，还在拼博。下面是很多我的唠叨，你喜欢就读读，不喜欢就TLDR – Too Long, Don’t Read!</p>
<p>自从98年毕业，到今天，参加工作有18个年头了，加上在大三的时候就为两个在外面接活的老师程序，到今天，写的程序被用到生产线也有18个年头了。</p>
<h4>背景经历</h4>
<p>要说明我技术上的“性取向”，还得我说说的我的一些背景和经历。</p>
<p>我这18年，大约分三个阶段：</p>
<ul>
<li><b>1996年-2000年</b>：<b>入门乱来期</b>，大三大四加在银行工作的两年。
<ul>
<li><span class="font" style="color: #333333;"><span class="font" style="color: #333333;">用Powerbuilder/Delphi在WindowsNT/SQL Server上做了好多个MIS管理软件，有酒店的，有送水的，有OA的。</span></span></li>
<li><span class="font" style="color: #333333;"><span class="font" style="color: #333333;"> 用Java的Applet做了一个Web的教学课件，用于在Win95/IE3.0中演示操作系统中的各种调度和算法的动画，得了个全国大学生挑战者杯的鼓励奖。</span></span></li>
<li><span class="font" style="color: #333333;"> 用Delphi的ISAPI技术以及PHP/ASP给一些公司和大学做过几个网站。</span></li>
</ul>
</li>
</ul>
<p> <a href="/articles/17446.html#more-17446" class="more-link">…</a></p><a href="/articles/17446.html#more-17446" class="more-link">
</a><p class="read-more"><a href="/articles/17446.html#more-17446" class="more-link"></a><a class="btn btn-default" href="/articles/17446.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-17446-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<nav class="navigation posts-navigation" role="navigation">
<h2 class="screen-reader-text">Posts navigation</h2>
<div class="nav-links">
<div class="row">
<div class="wp-pagenavi" role="navigation">
<span class="pages">第 6 / 74 页</span><a class="first" aria-label="First Page" href="/">« 首页</a><a class="previouspostslink" rel="prev" aria-label="上一页" href="/page/5.html">«</a><span class="extend">...</span><a class="page smaller" title="第 2 页" href="/page/2.html">2</a><a class="page smaller" title="第 3 页" href="/page/3.html">3</a><a class="page smaller" title="第 4 页" href="/page/4.html">4</a><a class="page smaller" title="第 5 页" href="/page/5.html">5</a><span aria-current="page" class="current">6</span><a class="page larger" title="第 7 页" href="/page/7.html">7</a><a class="page larger" title="第 8 页" href="/page/8.html">8</a><a class="page larger" title="第 9 页" href="/page/9.html">9</a><a class="page larger" title="第 10 页" href="/page/10.html">10</a><a class="page larger" title="第 11 页" href="/page/11.html">11</a><span class="extend">...</span><a class="larger page" title="第 20 页" href="/page/20.html">20</a><a class="larger page" title="第 30 页" href="/page/30.html">30</a><a class="larger page" title="第 40 页" href="/page/40.html">40</a><a class="larger page" title="第 50 页" href="/page/50.html">50</a><a class="larger page" title="第 60 页" href="/page/60.html">60</a><span class="extend">...</span><a class="nextpostslink" rel="next" aria-label="下一页" href="/page/7.html">»</a><a class="last" aria-label="Last Page" href="/page/74.html">末页 »</a>
</div>
</div>
</div>
</nav>
</main>
</div>

</div>
</div>

</div>

</div>
















</body></html>